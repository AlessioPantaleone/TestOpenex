<routes xmlns="http://camel.apache.org/schema/spring">
    <route>
        <from uri="timer:simple?period=5000"/>
        <setHeader headerName="X-Auth-Token">
            <constant>AwLb6hfb3vO0ycijxg/Wg1w1ENqexWzeeqlkBehA51aMpaYyfN9ZbQo/zlMlLbm5Urg=</constant>
        </setHeader>
        <to uri="http://demo.local.openex.io/api/exercises"/>
        <unmarshal>
            <json library="Gson" unmarshalTypeName="java.lang.Object"/>
        </unmarshal>
        <split executorServiceRef="openex-worker-thread-profile" streaming="true">
            <simple>${body}</simple>
            <setHeader headerName="router-header">
                <simple>${body[exercise_name]}</simple>
            </setHeader>
            <dynamicRouter ignoreInvalidEndpoints="true">
                <method ref="schedulerRouter" method="forward"/>
            </dynamicRouter>
        </split>
    </route>
</routes>