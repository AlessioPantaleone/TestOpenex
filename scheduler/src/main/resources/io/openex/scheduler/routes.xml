<routes xmlns="http://camel.apache.org/schema/spring">
    <route>
        <from uri="timer:simple?period=5000"/>
        <setHeader headerName="X-Auth-Token">
            <constant>{{openex_token}}</constant>
        </setHeader>
        <to uri="{{openex_inject_fetch}}"/>
        <unmarshal>
            <json library="Gson" unmarshalTypeName="java.lang.Object"/>
        </unmarshal>
        <split executorServiceRef="openex-worker-thread-profile" streaming="true">
            <simple>${body}</simple>
            <setHeader headerName="router-header">
                <simple>${body[exercise_name]}</simple>
            </setHeader>
            <dynamicRouter ignoreInvalidEndpoints="true">
                <method ref="schedulerRouter" method="forward"/>
            </dynamicRouter>
        </split>
    </route>
</routes>